(this.webpackJsonpcowin=this.webpackJsonpcowin||[]).push([[0],{133:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var a,i,o,c=n(0),r=n.n(c),s=n(6),l=n.n(s),d=(n(133),n(11)),b=n(50),u=n(18),p=n(48),j=n(49),f=function(e,t){return Object(j.a)(a||(a=Object(p.a)(["\n  white-space: nowrap;\n  display: inline-block;\n  border-radius: 5px;\n  padding: 5px 15px;\n  font-size: 16px;\n  color: white;\n  &:visited {\n    color: white;\n  }\n  background-image: linear-gradient(",", ",");\n  border: 1px solid ",";\n  &:hover {\n    background-image: linear-gradient(",", ",");\n    &[disabled] {\n      background-image: linear-gradient(",", ",");\n    }\n  }\n  &:visited {\n    color: black;\n  }\n  &[disabled] {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n"])),e,t,t,e,t,e,t)},x=Object(j.a)(i||(i=Object(p.a)([""," color: #555;"])),f("#ffffff","#d5d5d5")),h=f("#4f93ce","#285f8f"),m=j.b.div(o||(o=Object(p.a)(["\n  font-family: sans-serif;\n\n  h1 {\n    text-align: center;\n    color: #222;\n    margin-left: 8px;\n    margin-right:8px;\n  }\n\n  h2 {\n    text-align: center;\n    color: #222;\n        margin-left: 8px;\n    margin-right:8px;\n  }\n\n  & > div {\n    margin: 5px;\n    text-align: center;\n  }\n\n  & > a {\n    display: block;\n    text-align: center;\n    color: #222;\n    margin-bottom: 10px;\n  }\n\n  form {\n    width: 500px;\n    max-width: 80vw;\n    margin: 10px auto;\n    border: 1px solid #ccc;\n    padding: 20px;\n    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);\n    border-radius: 3px;\n    position: relative;\n    \n\n    .buttons {  \n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: center;\n      margin-top: 15px;\n    }\n    button {\n      margin: 0 10px;\n      &[type='submit'] {\n        ",";\n      }\n      &[type='button'] {\n        ",";\n      }\n    }\n    .error {\n      display: flex;\n      font-weight: bold;\n      color: #800;\n      flex-flow: row nowrap;\n      justify-content: center;\n    }\n    .Select {\n      width: 100%;\n    }\n    pre {\n      border: 1px solid #ccc;\n      background: rgba(0, 0, 0, 0.1);\n      box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);\n      padding: 20px;\n    }\n    \n    .textfield {\n      div {z-index: 0}\n    }\n  }\n"])),h,x),O=n(9),g=n(127),v=n(33),w=n.n(v),y=n(34),S=n.n(y),T=n(86),_=n(126),k=n.n(_),P=n(81),N=n.n(P),C=n(84),F=n.n(C),L=n(85),R=n(2),W=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),o=Object(u.a)(i,2),r=o[0],s=o[1],l=Object(c.useState)(!1),p=Object(u.a)(l,2),j=p[0],f=p[1],x=Object(c.useRef)(null),h=Object(c.useRef)(null),v=Object(c.useState)(0),y=Object(u.a)(v,2),_=y[0],P=y[1],C=Object(c.useState)(!1),W=Object(u.a)(C,2),A=W[0],D=W[1],I=Object(c.useState)(""),J=Object(u.a)(I,2),V=J[0],z=J[1],E="https://cdn-api.co-vin.in/api/v2/admin/location/",B="https://cowin-webserver-slotlocker2.cloud.okteto.net/",M=Object(L.useToasts)().addToast;Object(c.useEffect)((function(){w.a.get("".concat(E,"states")).then((function(e){if(e){var t=S()(e,"data.states",[]);a(t)}}))}),[]);var Y=function(e){var t=e.input,n=e.options,a=Object(b.a)(e,["input","options"]);return Object(R.jsx)(T.a,Object(d.a)(Object(d.a)(Object(d.a)({placeholder:"Select State..."},t),{},{options:n,getOptionLabel:function(e){return e.state_name},getOptionValue:function(e){return e.state_id}},a),{},{searchable:!0}))},q=function(e){var t=e.input,n=(e.options,Object(b.a)(e,["input","options"]));return Object(R.jsx)(T.a,Object(d.a)(Object(d.a)(Object(d.a)({placeholder:"Select District...",isMulti:!0},t),{},{options:r,getOptionLabel:function(e){return e.district_name},getOptionValue:function(e){return e.district_id}},n),{},{searchable:!0}))},G=function(e){var t=e.input,n=e.meta,a=Object(b.a)(e,["input","meta"]);return Object(R.jsx)(F.a,Object(d.a)(Object(d.a)(Object(d.a)({},t),a),{},{onChange:function(e,n){return t.onChange(n)},errorText:n.touched?n.error:""}))},H=function(e){return e?void 0:"Required"};function K(){var e={phone_number:V,otp:_};w.a.post("".concat(B,"api/v1/user/otp/submit/"),e).then((function(e){D(!0),M("Successfully registered for a WhatsApp notification. Stay Safe!",{appearance:"success"})}),(function(e){var t=S()(e,"response.data.message","Please enter correct OTP");M(t,{appearance:"error"})}))}function Q(e){P(e.target.value)}var U=function(){return x.current.scrollIntoView()},X=function(){return h.current.scrollIntoView()};return Object(R.jsx)(k.a,{muiTheme:N()(),children:Object(R.jsxs)(m,{children:[Object(R.jsx)("h1",{className:"font-roboto",children:"Get notified on WhatsApp when a vaccination slot is available in your city!"}),Object(R.jsx)("h1",{className:"font-roboto",children:"For 18+ only"}),!A&&Object(R.jsx)("h2",{className:"font-roboto",children:"Register below & relax, while we scan Co-win for available slots"}),A?Object(R.jsx)("h2",{children:"Successfully registered for a WhatsApp notification. Stay Safe!"}):Object(R.jsx)(O.b,{onSubmit:function(e){if(!j){var t=JSON.parse(JSON.stringify(e)),n=e.state.state_id,a=e.district.map((function(e){return e.district_id}));t.state_id=n,t.district_ids=a,delete t.state,delete t.district,z(t.phone_number),10===t.phone_number.length?t.message_consent?w.a.post("".concat(B,"api/v1/user/"),t).then((function(e){f(!0),M("Please Enter the OTP received on your phone number",{appearance:"success"})}),(function(e){console.log(e);var t=S()(e,"response.data.message","Something went wrong");M(t,{appearance:"error"})})):M("Please allow updates on Whatsapp to register for notification",{appearance:"error"}):M("Please enter a 10 digit phone number without country code",{appearance:"error"})}},render:function(e){var t=e.handleSubmit,a=e.form,i=e.submitting,o=e.pristine;e.values;return Object(R.jsxs)("form",{onSubmit:t,children:[Object(R.jsx)("div",{style:{marginTop:"20px"},ref:h,onFocus:X,children:Object(R.jsx)(O.a,{name:"state",component:Y,validate:H,options:n})}),Object(R.jsx)(g.a,{name:"state",children:function(e,t){var n;n=e.state_id,w.a.get("".concat(E,"districts/").concat(n)).then((function(e){if(e){var t=S()(e,"data.districts",[]);s(t)}}))}}),Object(R.jsx)("div",{style:{marginTop:"20px"},ref:x,onFocus:U,children:Object(R.jsx)(O.a,{name:"district",component:q,validate:H,options:r})}),Object(R.jsx)("div",{className:"textfield",children:Object(R.jsx)(O.a,{name:"first_name",component:G,validate:H,hintText:"Name",floatingLabelText:"Name"})}),Object(R.jsx)("div",{className:"textfield",children:Object(R.jsx)(O.a,{name:"phone_number",component:G,validate:H,hintText:"Phone Number",floatingLabelText:"Phone Number (no country code)"})}),Object(R.jsxs)("div",{style:{marginTop:"20px"},children:[Object(R.jsx)(O.a,{name:"message_consent",component:"input",type:"checkbox"}),Object(R.jsx)("label",{children:"Allow updates on Whatsapp"})]}),j&&Object(R.jsxs)("div",{children:[Object(R.jsx)(F.a,{variant:"standard",name:"otp",hintText:"OTP",floatingLabelText:"OTP",onChange:Q}),Object(R.jsx)("button",{type:"submit",onClick:K,children:"Submit OTP"})]}),!j&&Object(R.jsxs)("div",{style:{marginTop:"20px"},children:[Object(R.jsxs)("div",{className:"buttons",children:[Object(R.jsx)("button",{type:"submit",disabled:i,children:"Submit"}),Object(R.jsx)("button",{type:"button",onClick:a.reset,disabled:i||o,children:"Reset"})]}),Object(R.jsx)("div",{style:{marginTop:"10px",fontSize:"12px"},className:"center-align",children:Object(R.jsx)("label",{children:"Don't worry! Your data is safe with us. You can delete it anytime you want."})})]})]})}})]})})},A=function(){return Object(R.jsx)(L.ToastProvider,{autoDismiss:!0,children:Object(R.jsx)(W,{})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,311)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))};l.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(A,{})}),document.getElementById("root")),D()}},[[310,1,2]]]);
//# sourceMappingURL=main.e0013fd0.chunk.js.map