{"version":3,"sources":["Styles.js","App.js","reportWebVitals.js","index.js"],"names":["btn","light","dark","css","btnDefault","btnPrimary","styled","div","App","useState","states","setStates","districts","setDistricts","requestOTP","setRequestOTP","otp","setOTP","phoneNumber","setPhoneNumber","cowinUrl","baseUrl","useEffect","axios","get","then","response","_get","ReactSelectStateAdapter","input","options","rest","placeholder","getOptionLabel","option","state_name","getOptionValue","state_id","searchable","ReactSelectDistrictAdapter","isMulti","district_name","district_id","TextFieldAdapter","meta","onChange","event","value","errorText","touched","error","required","undefined","submitOTP","data","post","alert","console","log","setOTPValue","e","target","muiTheme","getMuiTheme","Styles","onSubmit","values","copiedValues","JSON","parse","stringify","state","district_ids","district","map","phone_number","render","handleSubmit","form","submitting","pristine","name","component","validate","hintText","floatingLabelText","style","marginTop","previous","stateId","type","variant","onClick","className","disabled","reset","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cedf379c.chunk.js","sourcesContent":["import styled, { css } from 'styled-components'\n\nconst btn = (light, dark) => css`\n  white-space: nowrap;\n  display: inline-block;\n  border-radius: 5px;\n  padding: 5px 15px;\n  font-size: 16px;\n  color: white;\n  &:visited {\n    color: white;\n  }\n  background-image: linear-gradient(${light}, ${dark});\n  border: 1px solid ${dark};\n  &:hover {\n    background-image: linear-gradient(${light}, ${dark});\n    &[disabled] {\n      background-image: linear-gradient(${light}, ${dark});\n    }\n  }\n  &:visited {\n    color: black;\n  }\n  &[disabled] {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n`\n\nconst btnDefault = css`${btn('#ffffff', '#d5d5d5')} color: #555;`\n\nconst btnPrimary = btn('#4f93ce', '#285f8f')\n\nexport default styled.div`\n  font-family: sans-serif;\n\n  h1 {\n    text-align: center;\n    color: #222;\n  }\n\n  h2 {\n    text-align: center;\n    color: #222;\n  }\n\n  & > div {\n    margin: 5px;\n    text-align: center;\n  }\n\n  & > a {\n    display: block;\n    text-align: center;\n    color: #222;\n    margin-bottom: 10px;\n  }\n\n  form {\n    max-width: 500px;\n    margin: 10px auto;\n    border: 1px solid #ccc;\n    padding: 20px;\n    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);\n    border-radius: 3px;\n    position: relative;\n    \n\n    & > .buttons {  \n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: center;\n      margin-top: 15px;\n    }\n    button {\n      margin: 0 10px;\n      &[type='submit'] {\n        ${btnPrimary};\n      }\n      &[type='button'] {\n        ${btnDefault};\n      }\n    }\n    .error {\n      display: flex;\n      font-weight: bold;\n      color: #800;\n      flex-flow: row nowrap;\n      justify-content: center;\n    }\n    .Select {\n      width: 100%;\n    }\n    pre {\n      border: 1px solid #ccc;\n      background: rgba(0, 0, 0, 0.1);\n      box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);\n      padding: 20px;\n    }\n  }\n`\n","/* eslint-disable jsx-a11y/accessible-emoji */\nimport React from 'react'\nimport Styles from './Styles'\nimport {Form, Field,} from 'react-final-form'\nimport {OnChange} from 'react-final-form-listeners'\nimport {useState, useEffect} from \"react\";\nimport axios from \"axios\";\nimport _get from 'lodash/get'\nimport Select from 'react-select'\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\nimport getMuiTheme from 'material-ui/styles/getMuiTheme'\nimport TextField from 'material-ui/TextField'\n\n\nconst App = () => {\n  const [states, setStates] = useState([]);\n  const [districts, setDistricts] = useState([]);\n  const [requestOTP, setRequestOTP] = useState(false);\n  const [otp, setOTP] = useState(0);\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const cowinUrl = 'https://cdn-api.co-vin.in/api/v2/admin/location/';\n  const baseUrl = 'https://cowin-webserver-slotlocker2.cloud.okteto.net/'\n\n  const onSubmit = values => {\n    if (requestOTP)\n      return\n    let copiedValues = JSON.parse(JSON.stringify(values));\n    const state_id = values.state.state_id;\n    const district_ids = values.district.map(district => {\n      return district.district_id\n    })\n    copiedValues.state_id = state_id;\n    copiedValues.district_ids = district_ids;\n    delete copiedValues['state'];\n    delete copiedValues['district'];\n    setPhoneNumber(copiedValues.phone_number)\n    axios.post(`${baseUrl}api/v1/user/`, copiedValues).then((response) => {\n      setRequestOTP(true);\n    }, (error) => {\n      console.log(error);\n    });\n  }\n\n  function getAllStates() {\n    axios.get(`${cowinUrl}states`)\n        .then((response) => {\n          if (response) {\n            const states = _get(response, 'data.states', []);\n            setStates(states)\n          }\n        })\n  }\n\n  function getAllDistricts(stateId) {\n    axios.get(`${cowinUrl}districts/${stateId}`)\n        .then((response) => {\n          if (response) {\n            const districts = _get(response, 'data.districts', []);\n            setDistricts(districts)\n          }\n        })\n  }\n\n  useEffect(() => {\n    getAllStates()\n  }, [])\n\n  const ReactSelectStateAdapter = ({input, options, ...rest}) => {\n    return (\n        <Select placeholder='Select State...'\n                {...input}\n                options={options}\n                getOptionLabel={(option) => option.state_name}\n                getOptionValue={(option) => option.state_id}\n                {...rest}\n                searchable/>\n\n    )\n  }\n\n  const ReactSelectDistrictAdapter = ({input, options, ...rest}) => {\n    return (\n        <Select\n            placeholder='Select District...'\n            isMulti\n            {...input}\n            options={districts}\n            getOptionLabel={(option) => option.district_name}\n            getOptionValue={(option) => option.district_id}\n            {...rest}\n            searchable/>\n\n    )\n  }\n\n  const TextFieldAdapter = ({input, meta, ...rest}) => (\n      <TextField\n          {...input}\n          {...rest}\n          onChange={(event, value) => input.onChange(value)}\n          errorText={meta.touched ? meta.error : ''}\n      />\n  )\n\n  const required = value => (value ? undefined : 'Required')\n\n  function submitOTP() {\n    const data = {\"phone_number\": phoneNumber, \"otp\": otp};\n    axios.post(`${baseUrl}api/v1/user/otp/submit/`, data).then((response) => {\n      alert('Successfully registered for a Whatsapp notification. Stay Safe!')\n    }, (error) => {\n      console.log(error);\n    });\n  }\n\n  function setOTPValue(e) {\n    setOTP(e.target.value)\n  }\n\n  return (\n      <MuiThemeProvider muiTheme={getMuiTheme()}>\n        <Styles>\n          <h1>Cowin registration helper</h1>\n          <h2>Get notified by Whatsapp whenever slots open up for 18 - 45 age group.</h2>\n          <Form\n              onSubmit={onSubmit}\n              render={({handleSubmit, form, submitting, pristine, values}) => (\n                  <form onSubmit={handleSubmit}>\n                    <div>\n                      <Field\n                          name=\"first_name\"\n                          component={TextFieldAdapter}\n                          validate={required}\n                          hintText=\"Name\"\n                          floatingLabelText=\"Name\"\n                      />\n                    </div>\n\n                    <div style={{marginTop: '20px'}}>\n                      <Field\n                          name=\"state\"\n                          component={ReactSelectStateAdapter}\n                          validate={required}\n                          options={states}\n                      />\n                    </div>\n                    <OnChange name=\"state\">\n                      {(value, previous) => {\n                        getAllDistricts(value.state_id)\n                      }}\n                    </OnChange>\n                    <div style={{marginTop: '20px'}}>\n                      <Field\n                          name=\"district\"\n                          component={ReactSelectDistrictAdapter}\n                          validate={required}\n                          options={districts}\n\n                      />\n                    </div>\n\n                    <div style={{marginTop: '20px'}}>\n                      <Field name=\"message_consent\" component=\"input\" type=\"checkbox\"/>\n                      <label>Give permission to notify on Whatsapp</label>\n                    </div>\n                    <div>\n                      <Field\n                          name=\"phone_number\"\n                          component={TextFieldAdapter}\n                          validate={required}\n                          hintText=\"Phone Number\"\n                          floatingLabelText=\"Phone Number\"\n                      />\n                    </div>\n\n\n                    {requestOTP &&\n                    <div>\n                      <TextField\n                          variant=\"standard\"\n                          name=\"otp\"\n                          hintText='OTP'\n                          floatingLabelText='OTP'\n                          onChange={setOTPValue}\n                      />\n                      <button type='submit'  onClick={submitOTP}>\n                        Submit OTP\n                      </button>\n                    </div>}\n\n                    {!requestOTP &&\n                    <div className=\"buttons\">\n                      <button type=\"submit\" disabled={submitting}>\n                        Submit\n                      </button>\n                      <button\n                          type=\"button\"\n                          onClick={form.reset}\n                          disabled={submitting || pristine}\n                      >\n                        Reset\n                      </button>\n                    </div>}\n                  </form>\n              )}\n          />\n        </Styles>\n      </MuiThemeProvider>\n  )\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}