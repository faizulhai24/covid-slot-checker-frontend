{"version":3,"sources":["Styles.js","App.js","reportWebVitals.js","index.js"],"names":["btn","light","dark","css","btnDefault","btnPrimary","styled","div","App","useState","states","setStates","districts","setDistricts","requestOTP","setRequestOTP","districtRef","useRef","stateRef","otp","setOTP","otpDone","setOTPDone","phoneNumber","setPhoneNumber","cowinUrl","baseUrl","addToast","useToasts","useEffect","axios","get","then","response","_get","ReactSelectStateAdapter","input","options","rest","placeholder","getOptionLabel","option","state_name","getOptionValue","state_id","searchable","ReactSelectDistrictAdapter","isMulti","district_name","district_id","TextFieldAdapter","meta","onChange","event","value","errorText","touched","error","required","undefined","submitOTP","data","post","appearance","toastMessage","setOTPValue","e","target","executeScrollDistrict","current","scrollIntoView","executeScrollState","muiTheme","getMuiTheme","Styles","className","onSubmit","values","copiedValues","JSON","parse","stringify","state","district_ids","district","map","phone_number","length","message_consent","console","log","render","handleSubmit","form","submitting","pristine","style","marginTop","ref","onFocus","name","component","validate","previous","stateId","hintText","floatingLabelText","type","variant","onClick","disabled","reset","fontSize","ToastApp","autoDismiss","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e0013fd0.chunk.js","sourcesContent":["import styled, { css } from 'styled-components'\n\nconst btn = (light, dark) => css`\n  white-space: nowrap;\n  display: inline-block;\n  border-radius: 5px;\n  padding: 5px 15px;\n  font-size: 16px;\n  color: white;\n  &:visited {\n    color: white;\n  }\n  background-image: linear-gradient(${light}, ${dark});\n  border: 1px solid ${dark};\n  &:hover {\n    background-image: linear-gradient(${light}, ${dark});\n    &[disabled] {\n      background-image: linear-gradient(${light}, ${dark});\n    }\n  }\n  &:visited {\n    color: black;\n  }\n  &[disabled] {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n`\n\nconst btnDefault = css`${btn('#ffffff', '#d5d5d5')} color: #555;`\n\nconst btnPrimary = btn('#4f93ce', '#285f8f')\n\nexport default styled.div`\n  font-family: sans-serif;\n\n  h1 {\n    text-align: center;\n    color: #222;\n    margin-left: 8px;\n    margin-right:8px;\n  }\n\n  h2 {\n    text-align: center;\n    color: #222;\n        margin-left: 8px;\n    margin-right:8px;\n  }\n\n  & > div {\n    margin: 5px;\n    text-align: center;\n  }\n\n  & > a {\n    display: block;\n    text-align: center;\n    color: #222;\n    margin-bottom: 10px;\n  }\n\n  form {\n    width: 500px;\n    max-width: 80vw;\n    margin: 10px auto;\n    border: 1px solid #ccc;\n    padding: 20px;\n    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);\n    border-radius: 3px;\n    position: relative;\n    \n\n    .buttons {  \n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: center;\n      margin-top: 15px;\n    }\n    button {\n      margin: 0 10px;\n      &[type='submit'] {\n        ${btnPrimary};\n      }\n      &[type='button'] {\n        ${btnDefault};\n      }\n    }\n    .error {\n      display: flex;\n      font-weight: bold;\n      color: #800;\n      flex-flow: row nowrap;\n      justify-content: center;\n    }\n    .Select {\n      width: 100%;\n    }\n    pre {\n      border: 1px solid #ccc;\n      background: rgba(0, 0, 0, 0.1);\n      box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);\n      padding: 20px;\n    }\n    \n    .textfield {\n      div {z-index: 0}\n    }\n  }\n`\n","/* eslint-disable jsx-a11y/accessible-emoji */\nimport React, {useEffect, useRef, useState} from 'react'\nimport Styles from './Styles'\nimport {Field, Form,} from 'react-final-form'\nimport {OnChange} from 'react-final-form-listeners'\nimport axios from \"axios\";\nimport _get from 'lodash/get'\nimport Select from 'react-select'\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\nimport getMuiTheme from 'material-ui/styles/getMuiTheme'\nimport TextField from 'material-ui/TextField'\nimport {ToastProvider, useToasts} from 'react-toast-notifications';\n\n\nconst App = () => {\n  const [states, setStates] = useState([]);\n  const [districts, setDistricts] = useState([]);\n  const [requestOTP, setRequestOTP] = useState(false);\n  const districtRef = useRef(null)\n  const stateRef = useRef(null)\n  const [otp, setOTP] = useState(0);\n  const [otpDone, setOTPDone] = useState(false);\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const cowinUrl = 'https://cdn-api.co-vin.in/api/v2/admin/location/';\n  const baseUrl = 'https://cowin-webserver-slotlocker2.cloud.okteto.net/'\n  const {addToast} = useToasts()\n\n  const onSubmit = values => {\n    if (requestOTP)\n      return\n    let copiedValues = JSON.parse(JSON.stringify(values));\n    const state_id = values.state.state_id;\n    const district_ids = values.district.map(district => {\n      return district.district_id\n    })\n    copiedValues.state_id = state_id;\n    copiedValues.district_ids = district_ids;\n    delete copiedValues['state'];\n    delete copiedValues['district'];\n\n    setPhoneNumber(copiedValues.phone_number)\n\n    if (copiedValues.phone_number.length !== 10) {\n      addToast(\"Please enter a 10 digit phone number without country code\", {\n        appearance: 'error',\n      })\n      return;\n    }\n\n    if (!copiedValues.message_consent) {\n      addToast(\"Please allow updates on Whatsapp to register for notification\", {\n        appearance: 'error',\n      })\n      return;\n    }\n\n    axios.post(`${baseUrl}api/v1/user/`, copiedValues).then((response) => {\n      setRequestOTP(true);\n      addToast('Please Enter the OTP received on your phone number', {\n        appearance: 'success',\n      })\n    }, (error) => {\n      console.log(error);\n      const toastMessage = _get(error, 'response.data.message', 'Something went wrong')\n      addToast(toastMessage, {\n        appearance: 'error',\n      })\n    });\n  }\n\n  function getAllStates() {\n    axios.get(`${cowinUrl}states`)\n        .then((response) => {\n          if (response) {\n            const states = _get(response, 'data.states', []);\n            setStates(states)\n          }\n        })\n  }\n\n  function getAllDistricts(stateId) {\n    axios.get(`${cowinUrl}districts/${stateId}`)\n        .then((response) => {\n          if (response) {\n            const districts = _get(response, 'data.districts', []);\n            setDistricts(districts)\n          }\n        })\n  }\n\n  useEffect(() => {\n    getAllStates()\n  }, [])\n\n  const ReactSelectStateAdapter = ({input, options, ...rest}) => {\n    return (\n        <Select placeholder='Select State...'\n                {...input}\n                options={options}\n                getOptionLabel={(option) => option.state_name}\n                getOptionValue={(option) => option.state_id}\n                {...rest}\n                searchable/>\n\n    )\n  }\n\n  const ReactSelectDistrictAdapter = ({input, options, ...rest}) => {\n    return (\n        <Select\n            placeholder='Select District...'\n            isMulti\n            {...input}\n            options={districts}\n            getOptionLabel={(option) => option.district_name}\n            getOptionValue={(option) => option.district_id}\n            {...rest}\n            searchable/>\n\n    )\n  }\n\n  const TextFieldAdapter = ({input, meta, ...rest}) => (\n      <TextField\n          {...input}\n          {...rest}\n          onChange={(event, value) => input.onChange(value)}\n          errorText={meta.touched ? meta.error : ''}\n      />\n  )\n\n  const required = value => (value ? undefined : 'Required')\n\n  function submitOTP() {\n    const data = {\"phone_number\": phoneNumber, \"otp\": otp};\n    axios.post(`${baseUrl}api/v1/user/otp/submit/`, data).then((response) => {\n      setOTPDone(true);\n      addToast('Successfully registered for a WhatsApp notification. Stay Safe!', {\n        appearance: 'success',\n      })\n\n    }, (error) => {\n      const toastMessage = _get(error, 'response.data.message', 'Please enter correct OTP')\n      addToast(toastMessage, {\n        appearance: 'error',\n      })\n    });\n  }\n\n  function setOTPValue(e) {\n    setOTP(e.target.value)\n  }\n\n  const executeScrollDistrict = () => districtRef.current.scrollIntoView()\n  const executeScrollState = () => stateRef.current.scrollIntoView()\n\n  // const _moveScreenToTop = () => {\n  //   const rootElement = document.getElementsByTagName('ela-tag');\n  //\n  //   for (let element of rootElement) {\n  //     if (element.getAttribute('id') === hintId) {\n  //       const topPos = element.offsetTop - 70;\n  //       window.scrollTo(0, topPos);\n  //     }\n  //   }\n  // };\n\n  return (\n      <MuiThemeProvider muiTheme={getMuiTheme()}>\n        <Styles>\n          <h1 className={'font-roboto'}>Get notified on WhatsApp when a vaccination slot is available in your city!</h1>\n          <h1 className={'font-roboto'}>For 18+ only</h1>\n          {!otpDone &&\n          <h2 className={'font-roboto'}>Register below & relax, while we scan Co-win for available slots</h2>}\n          {!otpDone ?\n              <Form\n                  onSubmit={onSubmit}\n                  render={({handleSubmit, form, submitting, pristine, values}) => (\n                      <form onSubmit={handleSubmit}>\n                        <div style={{marginTop: '20px'}} ref={stateRef} onFocus={executeScrollState}>\n                          <Field\n                              name=\"state\"\n                              component={ReactSelectStateAdapter}\n                              validate={required}\n                              options={states}\n                          />\n                        </div>\n                        <OnChange name=\"state\">\n                          {(value, previous) => {\n                            getAllDistricts(value.state_id)\n                          }}\n                        </OnChange>\n                        <div style={{marginTop: '20px'}} ref={districtRef} onFocus={executeScrollDistrict}>\n                          <Field\n                              name=\"district\"\n                              component={ReactSelectDistrictAdapter}\n                              validate={required}\n                              options={districts}\n\n                          />\n                        </div>\n\n                        <div className='textfield'>\n                          <Field\n                              name=\"first_name\"\n                              component={TextFieldAdapter}\n                              validate={required}\n                              hintText=\"Name\"\n                              floatingLabelText=\"Name\"\n                          />\n                        </div>\n\n                        <div className='textfield'>\n                          <Field\n                              name=\"phone_number\"\n                              component={TextFieldAdapter}\n                              validate={required}\n                              hintText=\"Phone Number\"\n                              floatingLabelText=\"Phone Number (no country code)\"\n                          />\n                        </div>\n\n                        <div style={{marginTop: '20px'}}>\n                          <Field name=\"message_consent\" component=\"input\" type=\"checkbox\"/>\n                          <label>\n                            Allow updates on Whatsapp\n                          </label>\n                        </div>\n\n                        {requestOTP &&\n                        <div>\n                          <TextField\n                              variant=\"standard\"\n                              name=\"otp\"\n                              hintText='OTP'\n                              floatingLabelText='OTP'\n                              onChange={setOTPValue}\n                          />\n                          <button type='submit' onClick={submitOTP}>\n                            Submit OTP\n                          </button>\n                        </div>}\n\n                        {!requestOTP &&\n                        <div style={{marginTop: '20px'}}>\n\n                          <div className=\"buttons\">\n                            <button type=\"submit\" disabled={submitting}>\n                              Submit\n                            </button>\n                            <button\n                                type=\"button\"\n                                onClick={form.reset}\n                                disabled={submitting || pristine}\n                            >\n                              Reset\n                            </button>\n                          </div>\n                        <div style={{marginTop: '10px', fontSize:'12px'}} className={'center-align'}>\n                          <label>\n                            Don't worry! Your data is safe with us. You can delete it anytime you want.\n                          </label>\n                        </div>\n\n                        </div>}\n                      </form>\n                  )}\n              />\n              :\n              <h2>Successfully registered for a WhatsApp notification. Stay Safe!</h2>\n          }\n        </Styles>\n      </MuiThemeProvider>\n  )\n}\n\nconst ToastApp = () => (\n    <ToastProvider autoDismiss={true}>\n      <App/>\n    </ToastProvider>\n)\n\n\nexport default ToastApp;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}