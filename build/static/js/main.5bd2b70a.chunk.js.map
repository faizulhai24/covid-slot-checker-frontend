{"version":3,"sources":["Styles.js","App.js","reportWebVitals.js","index.js"],"names":["btn","light","dark","css","btnDefault","btnPrimary","styled","div","App","useState","states","setStates","districts","setDistricts","requestOTP","setRequestOTP","otp","setOTP","otpDone","setOTPDone","phoneNumber","setPhoneNumber","cowinUrl","baseUrl","addToast","useToasts","useEffect","axios","get","then","response","_get","ReactSelectStateAdapter","input","options","rest","placeholder","getOptionLabel","option","state_name","getOptionValue","state_id","searchable","ReactSelectDistrictAdapter","isMulti","district_name","district_id","TextFieldAdapter","meta","onChange","event","value","errorText","touched","error","required","undefined","submitOTP","data","post","appearance","toastMessage","setOTPValue","e","target","muiTheme","getMuiTheme","Styles","className","onSubmit","values","copiedValues","JSON","parse","stringify","state","district_ids","district","map","phone_number","length","message_consent","console","log","render","handleSubmit","form","submitting","pristine","style","marginTop","name","component","validate","previous","stateId","hintText","floatingLabelText","type","variant","onClick","disabled","reset","ToastApp","autoDismiss","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5bd2b70a.chunk.js","sourcesContent":["import styled, { css } from 'styled-components'\n\nconst btn = (light, dark) => css`\n  white-space: nowrap;\n  display: inline-block;\n  border-radius: 5px;\n  padding: 5px 15px;\n  font-size: 16px;\n  color: white;\n  &:visited {\n    color: white;\n  }\n  background-image: linear-gradient(${light}, ${dark});\n  border: 1px solid ${dark};\n  &:hover {\n    background-image: linear-gradient(${light}, ${dark});\n    &[disabled] {\n      background-image: linear-gradient(${light}, ${dark});\n    }\n  }\n  &:visited {\n    color: black;\n  }\n  &[disabled] {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n`\n\nconst btnDefault = css`${btn('#ffffff', '#d5d5d5')} color: #555;`\n\nconst btnPrimary = btn('#4f93ce', '#285f8f')\n\nexport default styled.div`\n  font-family: sans-serif;\n\n  h1 {\n    text-align: center;\n    color: #222;\n    margin-left: 8px;\n    margin-right:8px;\n  }\n\n  h2 {\n    text-align: center;\n    color: #222;\n        margin-left: 8px;\n    margin-right:8px;\n  }\n\n  & > div {\n    margin: 5px;\n    text-align: center;\n  }\n\n  & > a {\n    display: block;\n    text-align: center;\n    color: #222;\n    margin-bottom: 10px;\n  }\n\n  form {\n    width: 500px;\n    max-width: 80vw;\n    margin: 10px auto;\n    border: 1px solid #ccc;\n    padding: 20px;\n    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);\n    border-radius: 3px;\n    position: relative;\n    \n\n    & > .buttons {  \n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: center;\n      margin-top: 15px;\n    }\n    button {\n      margin: 0 10px;\n      &[type='submit'] {\n        ${btnPrimary};\n      }\n      &[type='button'] {\n        ${btnDefault};\n      }\n    }\n    .error {\n      display: flex;\n      font-weight: bold;\n      color: #800;\n      flex-flow: row nowrap;\n      justify-content: center;\n    }\n    .Select {\n      width: 100%;\n    }\n    pre {\n      border: 1px solid #ccc;\n      background: rgba(0, 0, 0, 0.1);\n      box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);\n      padding: 20px;\n    }\n    \n    .textfield {\n      div {z-index: 0}\n    }\n  }\n`\n","/* eslint-disable jsx-a11y/accessible-emoji */\nimport React, {useEffect, useState} from 'react'\nimport Styles from './Styles'\nimport {Field, Form,} from 'react-final-form'\nimport {OnChange} from 'react-final-form-listeners'\nimport axios from \"axios\";\nimport _get from 'lodash/get'\nimport Select from 'react-select'\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\nimport getMuiTheme from 'material-ui/styles/getMuiTheme'\nimport TextField from 'material-ui/TextField'\nimport { ToastProvider, useToasts } from 'react-toast-notifications';\n\n\nconst App = () => {\n    const [states, setStates] = useState([]);\n    const [districts, setDistricts] = useState([]);\n    const [requestOTP, setRequestOTP] = useState(false);\n    const [otp, setOTP] = useState(0);\n    const [otpDone, setOTPDone] = useState(false);\n    const [phoneNumber, setPhoneNumber] = useState('');\n    const cowinUrl = 'https://cdn-api.co-vin.in/api/v2/admin/location/';\n    const baseUrl = 'https://cowin-webserver-slotlocker2.cloud.okteto.net/'\n    const { addToast } = useToasts()\n\n    const onSubmit = values => {\n        if (requestOTP)\n            return\n        let copiedValues = JSON.parse(JSON.stringify(values));\n        const state_id = values.state.state_id;\n        const district_ids = values.district.map(district => {\n            return district.district_id\n        })\n        copiedValues.state_id = state_id;\n        copiedValues.district_ids = district_ids;\n        delete copiedValues['state'];\n        delete copiedValues['district'];\n\n        setPhoneNumber(copiedValues.phone_number)\n\n        if (copiedValues.phone_number.length !== 10) {\n            addToast(\"Please enter a 10 digit phone number without country code\", {\n                appearance: 'error',\n            })\n            return;\n        }\n\n        if (!copiedValues.message_consent) {\n            addToast(\"Please allow updates on Whatsapp to register for notification\", {\n                appearance: 'error',\n            })\n            return;\n        }\n\n        axios.post(`${baseUrl}api/v1/user/`, copiedValues).then((response) => {\n            setRequestOTP(true);\n            addToast('Please Enter the OTP received on your phone number', {\n                appearance: 'success',\n            })\n        }, (error) => {\n            console.log(error);\n            const toastMessage = _get(error, 'response.data.message', 'Something went wrong')\n            addToast(toastMessage, {\n                appearance: 'error',\n            })\n        });\n    }\n\n    function getAllStates() {\n        axios.get(`${cowinUrl}states`)\n            .then((response) => {\n                if (response) {\n                    const states = _get(response, 'data.states', []);\n                    setStates(states)\n                }\n            })\n    }\n\n    function getAllDistricts(stateId) {\n        axios.get(`${cowinUrl}districts/${stateId}`)\n            .then((response) => {\n                if (response) {\n                    const districts = _get(response, 'data.districts', []);\n                    setDistricts(districts)\n                }\n            })\n    }\n\n    useEffect(() => {\n        getAllStates()\n    }, [])\n\n    const ReactSelectStateAdapter = ({input, options, ...rest}) => {\n        return (\n            <Select placeholder='Select State...'\n                    {...input}\n                    options={options}\n                    getOptionLabel={(option) => option.state_name}\n                    getOptionValue={(option) => option.state_id}\n                    {...rest}\n                    searchable/>\n\n        )\n    }\n\n    const ReactSelectDistrictAdapter = ({input, options, ...rest}) => {\n        return (\n            <Select\n                placeholder='Select District...'\n                isMulti\n                {...input}\n                options={districts}\n                getOptionLabel={(option) => option.district_name}\n                getOptionValue={(option) => option.district_id}\n                {...rest}\n                searchable/>\n\n        )\n    }\n\n    const TextFieldAdapter = ({input, meta, ...rest}) => (\n        <TextField\n            {...input}\n            {...rest}\n            onChange={(event, value) => input.onChange(value)}\n            errorText={meta.touched ? meta.error : ''}\n        />\n    )\n\n    const required = value => (value ? undefined : 'Required')\n\n    function submitOTP() {\n        const data = {\"phone_number\": phoneNumber, \"otp\": otp};\n        axios.post(`${baseUrl}api/v1/user/otp/submit/`, data).then((response) => {\n            setOTPDone(true);\n            addToast('Successfully registered for a WhatsApp notification. Stay Safe!', {\n                appearance: 'success',\n            })\n\n        }, (error) => {\n            const toastMessage = _get(error, 'response.data.message', 'Please enter correct OTP')\n            addToast(toastMessage, {\n                appearance: 'error',\n            })\n        });\n    }\n\n    function setOTPValue(e) {\n        setOTP(e.target.value)\n    }\n\n    return (\n        <MuiThemeProvider muiTheme={getMuiTheme()}>\n            <Styles>\n                <h1 className={'font-roboto'}>Get notified on WhatsApp when a vaccination slot is </h1>\n                <h1 className={'font-roboto'}>available in your city!</h1>\n                <h2 className={'font-roboto'}>Register below & relax, while we scan Co-win for available slots</h2>\n                {!otpDone ?\n                    <Form\n                        onSubmit={onSubmit}\n                        render={({handleSubmit, form, submitting, pristine, values}) => (\n                            <form onSubmit={handleSubmit}>\n                                <div style={{marginTop: '20px'}}>\n                                    <Field\n                                        name=\"state\"\n                                        component={ReactSelectStateAdapter}\n                                        validate={required}\n                                        options={states}\n                                    />\n                                </div>\n                                <OnChange name=\"state\">\n                                    {(value, previous) => {\n                                        getAllDistricts(value.state_id)\n                                    }}\n                                </OnChange>\n                                <div style={{marginTop: '20px'}}>\n                                    <Field\n                                        name=\"district\"\n                                        component={ReactSelectDistrictAdapter}\n                                        validate={required}\n                                        options={districts}\n\n                                    />\n                                </div>\n\n                                <div className='textfield'>\n                                    <Field\n                                        name=\"first_name\"\n                                        component={TextFieldAdapter}\n                                        validate={required}\n                                        hintText=\"Name\"\n                                        floatingLabelText=\"Name\"\n                                    />\n                                </div>\n\n                                <div className='textfield'>\n                                    <Field\n                                        name=\"phone_number\"\n                                        component={TextFieldAdapter}\n                                        validate={required}\n                                        hintText=\"Phone Number\"\n                                        floatingLabelText=\"Phone Number (no country code)\"\n                                    />\n                                </div>\n\n                                <div style={{marginTop: '20px'}}>\n                                    <Field name=\"message_consent\" component=\"input\" type=\"checkbox\"/>\n                                    <label>\n                                        Allow updates on Whatsapp\n                                    </label>\n                                </div>\n\n                                {requestOTP &&\n                                <div>\n                                    <TextField\n                                        variant=\"standard\"\n                                        name=\"otp\"\n                                        hintText='OTP'\n                                        floatingLabelText='OTP'\n                                        onChange={setOTPValue}\n                                    />\n                                    <button type='submit' onClick={submitOTP}>\n                                        Submit OTP\n                                    </button>\n                                </div>}\n\n                                {!requestOTP &&\n                                <div className=\"buttons\">\n                                    <button type=\"submit\" disabled={submitting}>\n                                        Submit\n                                    </button>\n                                    <button\n                                        type=\"button\"\n                                        onClick={form.reset}\n                                        disabled={submitting || pristine}\n                                    >\n                                        Reset\n                                    </button>\n                                </div>}\n                            </form>\n                        )}\n                    />\n                    :\n                    <h2>Successfully registered for a WhatsApp notification. Stay Safe!</h2>\n                }\n            </Styles>\n        </MuiThemeProvider>\n    )\n}\n\nconst ToastApp = () => (\n    <ToastProvider autoDismiss={true}>\n        <App />\n    </ToastProvider>\n)\n\n\n\nexport default ToastApp;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}