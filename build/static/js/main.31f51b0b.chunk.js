(this.webpackJsonpcowin=this.webpackJsonpcowin||[]).push([[0],{148:function(e,t,n){},324:function(e,t,n){"use strict";n.r(t);var a,i,c,o=n(0),r=n.n(o),s=n(10),l=n.n(s),d=(n(148),n(15)),p=n(63),b=n(16),u=n(61),j=n(62),h=function(e,t){return Object(j.a)(a||(a=Object(u.a)(["\n  white-space: nowrap;\n  display: inline-block;\n  border-radius: 5px;\n  padding: 5px 15px;\n  font-size: 16px;\n  color: white;\n  &:visited {\n    color: white;\n  }\n  background-image: linear-gradient(",", ",");\n  border: 1px solid ",";\n  &:hover {\n    background-image: linear-gradient(",", ",");\n    &[disabled] {\n      background-image: linear-gradient(",", ",");\n    }\n  }\n  &:visited {\n    color: black;\n  }\n  &[disabled] {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n"])),e,t,t,e,t,e,t)},x=Object(j.a)(i||(i=Object(u.a)([""," color: #555;"])),h("#ffffff","#d5d5d5")),f=h("#4f93ce","#285f8f"),O=j.b.div(c||(c=Object(u.a)(["\n  font-family: sans-serif;\n\n  h1 {\n    text-align: center;\n    color: #222;\n    margin-left: 8px;\n    margin-right:8px;\n  }\n\n  h2 {\n    text-align: center;\n    color: #222;\n        margin-left: 8px;\n    margin-right:8px;\n  }\n\n  & > div {\n    margin: 5px;\n    text-align: center;\n  }\n\n  & > a {\n    display: block;\n    text-align: center;\n    color: #222;\n    margin-bottom: 10px;\n  }\n\n  form {\n    width: 500px;\n    max-width: 80vw;\n    margin: 10px auto;\n    border: 1px solid #ccc;\n    padding: 20px;\n    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);\n    border-radius: 3px;\n    position: relative;\n    \n\n    .buttons {  \n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: center;\n      margin-top: 15px;\n    }\n    button {\n      margin: 0 10px;\n      &[type='submit'] {\n        ",";\n      }\n      &[type='button'] {\n        ",";\n      }\n    }\n    .error {\n      display: flex;\n      font-weight: bold;\n      color: #800;\n      flex-flow: row nowrap;\n      justify-content: center;\n    }\n    .Select {\n      width: 100%;\n    }\n    pre {\n      border: 1px solid #ccc;\n      background: rgba(0, 0, 0, 0.1);\n      box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);\n      padding: 20px;\n    }\n    \n    .textfield {\n      div {z-index: 0}\n    }\n    \n  }\n"])),f,x),m=n(12),g=n(140),v=n(26),y=n.n(v),w=n(42),S=n.n(w),T=n(99),N=n(139),_=n.n(N),k=n(94),C=n.n(k),P=n(97),D=n.n(P),W=n(98);var z,F=n(341),A=n(342),L=n(339),R=n(2),I=Object(L.a)((function(e){return{root:{flexGrow:1,marginTop:"20px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},availability:{color:"#2e2e2e",fontSize:"12px",backgroundColor:" #a9d18e",padding:"0 10px",display:"flex",borderRadius:"50px",justifyContent:"center"},paid:{color:"#fff",fontSize:"9px",backgroundColor:"#2152b3",borderRadius:"20px",padding:"2px 5px"}}})),J=function(){var e=Object(o.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)([]),c=Object(b.a)(i,2),r=c[0],s=c[1],l=Object(o.useState)(!1),u=Object(b.a)(l,2),j=u[0],h=u[1],x=Object(o.useRef)(null),f=Object(o.useRef)(null),v=Object(o.useState)(0),w=Object(b.a)(v,2),N=w[0],k=w[1],P=Object(o.useState)(void 0),L=Object(b.a)(P,2),J=L[0],E=L[1],M=Object(o.useState)(!1),V=Object(b.a)(M,2),B=V[0],q=V[1],G=Object(o.useState)(""),Y=Object(b.a)(G,2),K=Y[0],H=Y[1],Q=Object(o.useState)(!1),U=Object(b.a)(Q,2),X=U[0],Z=U[1],$="https://cdn-api.co-vin.in/api/v2/admin/location/",ee="https://cowin-webserver-slotlocker2.cloud.okteto.net/",te=Object(W.useToasts)().addToast;Object(o.useEffect)((function(){y.a.get("".concat($,"states")).then((function(e){if(e){var t=S()(e,"data.states",[]);a(t)}}))}),[]);var ne=function(e){var t=e.input,n=e.options,a=Object(p.a)(e,["input","options"]);return Object(R.jsx)(T.a,Object(d.a)(Object(d.a)(Object(d.a)({placeholder:"Select State..."},t),{},{options:n,getOptionLabel:function(e){return e.state_name},getOptionValue:function(e){return e.state_id}},a),{},{searchable:!0}))},ae=function(e){var t=e.input,n=e.options,a=Object(p.a)(e,["input","options"]);function i(e){console.log(e),z=e.map((function(e){return e.district_id})),t.onChange(e)}return console.log(n,a,t),Object(R.jsx)(T.a,Object(d.a)(Object(d.a)(Object(d.a)({placeholder:"Select District...",isMulti:!0},t),{},{options:r,getOptionLabel:function(e){return e.district_name},getOptionValue:function(e){return e.district_id},onChange:function(e,t){return i(e)}},a),{},{searchable:!0}))},ie=function(e){var t=e.input,n=e.meta,a=Object(p.a)(e,["input","meta"]);return Object(R.jsx)(D.a,Object(d.a)(Object(d.a)(Object(d.a)({},t),a),{},{onChange:function(e,n){return t.onChange(n)},errorText:n.touched?n.error:""}))},ce=function(e){return e?void 0:"Required"};function oe(){var e={phone_number:K,otp:N};y.a.post("".concat(ee,"api/v1/user/otp/submit/"),e).then((function(e){q(!0),te("Successfully registered for a WhatsApp notification. Stay Safe!",{appearance:"success"})}),(function(e){var t=S()(e,"response.data.message","Please enter correct OTP");te(t,{appearance:"error"})}))}function re(e){k(e.target.value)}var se=function(){return x.current.scrollIntoView()},le=function(){return f.current.scrollIntoView()};function de(){var e=function(e){for(var t=[],n=[],a=0;a<5;a++){var i=new Date(Date.now()+6048e5*a).toJSON().slice(0,10).split("-").reverse().join("/");t.push(i)}for(var c=0;c<e.length;c++)for(var o=0;o<t.length;o++){console.log(t[o]);var r="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=".concat(e[c],"&date=").concat(t[o]);[].push(y.a.get(r))}return Promise.all([]).then((function(e){e.forEach((function(e){for(var t=e.centers,a=0;a<t.length;a++)for(var i=t[a],c=i.sessions,o=0;o<c.length;o++){var r=c[o];18===r.min_age_limit&&r.available_capacity>1&&n.push({centerName:i.name,districtName:i.district_name,date:r.date,availableCapacity:r.available_capacity,vaccine:r.vaccine,feeType:i.fee_type})}}))}),(function(){return console.log("Failed to fetch the slots")})),n}(z);console.log(e),Z(!0),e.length>0&&E(e)}var pe=I();function be(){te("We are asking you to do this because of existing Whatsapp policy where a number cannot reach out to more than 1000 new users per day. When you message us, Whatsapp does not count it against this quota. ",{appearance:"info",autoDismiss:!1,placement:"bottom-right"})}return Object(R.jsx)(_.a,{muiTheme:C()(),children:Object(R.jsxs)(O,{children:[Object(R.jsx)("h1",{className:"font-roboto",children:"Get notified on WhatsApp when a vaccination slot is available in your city!"}),Object(R.jsx)("h1",{className:"font-roboto",children:"For 18+ only"}),!B&&Object(R.jsx)("h2",{className:"font-roboto",children:"Register below & relax, while we scan Co-win for available slots"}),B?Object(R.jsx)("h2",{children:"Successfully registered for a WhatsApp notification. Stay Safe!"}):Object(R.jsx)(m.b,{onSubmit:function(e){if(!j&&X){var t=JSON.parse(JSON.stringify(e)),n=e.state.state_id,a=e.district.map((function(e){return e.district_id}));t.state_id=n,t.district_ids=a,delete t.state,delete t.district,H(t.phone_number),10===t.phone_number.length?t.message_consent?y.a.post("".concat(ee,"api/v1/user/"),t).then((function(e){h(!0),te("Please Enter the OTP received on your WhatsApp",{appearance:"success"})}),(function(e){console.log(e);var t=S()(e,"response.data.message","Something went wrong");te(t,{appearance:"error"})})):te("Please allow updates on Whatsapp to register for notification",{appearance:"error"}):te("Please enter a 10 digit phone number without country code",{appearance:"error"})}},render:function(e){var t=e.handleSubmit,a=e.form,i=e.submitting,c=e.pristine;e.values;return Object(R.jsxs)("form",{onSubmit:t,children:[Object(R.jsx)("div",{style:{marginTop:"20px"},ref:f,onFocus:le,children:Object(R.jsx)(m.a,{name:"state",component:ne,validate:ce,options:n})}),Object(R.jsx)(g.a,{name:"state",children:function(e,t){var n;n=e.state_id,y.a.get("".concat($,"districts/").concat(n)).then((function(e){if(e){var t=S()(e,"data.districts",[]);s(t)}}))}}),Object(R.jsx)("div",{style:{marginTop:"20px"},ref:x,onFocus:se,children:Object(R.jsx)(m.a,{name:"district",component:ae,validate:ce,options:r})}),Object(R.jsx)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:Object(R.jsx)("button",{type:"submit",onClick:de,children:"Search"})}),J&&Object(R.jsx)("div",{className:pe.root,children:Object(R.jsx)(F.a,{container:!0,spacing:1,children:J.map((function(e){return Object(R.jsx)(F.a,{item:!0,xs:!0,children:Object(R.jsxs)(A.a,{className:pe.paper,children:[Object(R.jsx)("div",{children:Object(R.jsx)("label",{children:e.centerName})}),Object(R.jsx)("div",{style:{fontSize:"12px"},children:Object(R.jsx)("label",{children:e.districtName})}),Object(R.jsx)("div",{children:Object(R.jsx)("label",{children:e.date})}),Object(R.jsx)("div",{className:pe.availability,children:Object(R.jsx)("label",{children:e.availableCapacity})}),Object(R.jsx)("div",{style:{fontSize:"12px"},children:Object(R.jsx)("label",{children:e.vaccine})}),Object(R.jsx)("div",{className:pe.paid,children:Object(R.jsx)("label",{children:e.feeType})})]})})}))})}),Object(R.jsx)("div",{className:pe.root,children:Object(R.jsx)(F.a,{container:!0,spacing:1})}),X&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"textfield",children:Object(R.jsx)(m.a,{name:"first_name",component:ie,validate:ce,hintText:"Name",floatingLabelText:"Name"})}),Object(R.jsx)("div",{className:"textfield",children:Object(R.jsx)(m.a,{name:"phone_number",component:ie,validate:ce,hintText:"Phone Number",floatingLabelText:"Phone Number (no country code)"})}),Object(R.jsxs)("div",{style:{marginTop:"20px"},children:[Object(R.jsx)(m.a,{name:"message_consent",component:"input",type:"checkbox"}),Object(R.jsx)("label",{children:"Allow updates on WhatsApp"})]}),!j&&Object(R.jsxs)("div",{style:{marginTop:"20px"},children:[Object(R.jsxs)("div",{className:"buttons",children:[Object(R.jsx)("button",{type:"submit",disabled:i,children:"Submit"}),Object(R.jsx)("button",{type:"button",onClick:a.reset,disabled:i||c,children:"Reset"})]}),Object(R.jsx)("div",{style:{marginTop:"10px",fontSize:"12px"},className:"center-align",children:Object(R.jsx)("label",{children:"Don't worry! Your data is safe with us. You can delete it anytime you want."})})]})]}),j&&Object(R.jsxs)("div",{children:[Object(R.jsx)(D.a,{variant:"standard",name:"otp",hintText:"OTP",floatingLabelText:"OTP",onChange:re}),Object(R.jsx)("button",{type:"submit",onClick:oe,children:"Submit OTP"}),Object(R.jsxs)("div",{style:{marginTop:"10px",fontSize:"14px"},className:"center-align",children:[Object(R.jsxs)("label",{children:["In case you don't receive the OTP, please click \xa0",Object(R.jsx)("a",{href:"http://api.whatsapp.com/send?phone=918047107750&text=Notify%20Me",children:"here"})," \xa0 and hit send and you'll be registered."]}),Object(R.jsx)("div",{style:{color:"blue",textDecoration:"underline"},onClick:be,children:"Know More"})]})]})]})}})]})})},E=function(){return Object(R.jsx)(W.ToastProvider,{autoDismiss:!0,children:Object(R.jsx)(J,{})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,344)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),c(e),o(e)}))};l.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(E,{})}),document.getElementById("root")),M()}},[[324,1,2]]]);
//# sourceMappingURL=main.31f51b0b.chunk.js.map